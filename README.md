Часть2
В объеденение юнитов использован компоновщик (класс Village и класс Fraction)
Так как в каждой деревне могут находиться юниты разного типа, то был добавлен декоратор, которые оборачивает всех юнитов новыми методами

Часть3
Чтобы объединять юнитов нужного типа был добавлен паттерн итератор. Чтобы отряды юнитов смогли передвигаться и атаковать был добавлен паттерн visitor от которого наследуются классы передвижения, атаки, апгрейда. 

Добавленный функционал

Отряды юнитов формируются в деревне. При этом в самой деревне формируются подотряды юнитов одного типа.

При наведении указателя на деревню и нажатие комбинации клавиш 'p' +  ('1' или '2' или '3' или'4') будут объединяться юниты соответственного этой цифре типа (1 - rider, 2 - archer, 3 - dragon, 4 - giant)

Также при наведении указателя на деревню снизу вы можете увидеть надпись "all units of this village are in the squad". Если этой написи нет значит юниты не находяться в одном отряде.

Чтобы расформировать отряд нужно навести указатель на деревню в которой отряд был создан и нажать клавишу 'o'

Передвижение и атака отрядами юнитов происходит совершенно также как и передвижение и атака одного юнита.

Если вы апгрейднули отряд, то вы не можете ходить или атаковать в этом игровом ходу.
Если вы сделали атаку или передвинули отряд, то вы не можете апгрейдить.
Для апгрейда нужны зведы.

Информация о запуске программы и первая часть лежит в директории patterns





